{% extends 'base.html' %}
{% load static %}

{% block title %}{{ post.title }} - NAKLIYE NET Blog{% endblock %}
{% block description %}{{ post.meta_description|default:post.content|truncatewords:30 }}{% endblock %}
{% block keywords %}{{ post.meta_keywords }}{% endblock %}

{% block extra_head %}
<!-- Schema.org Article markup -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ post.title }}",
  "datePublished": "{{ post.created_at|date:'c' }}",
  "dateModified": "{{ post.updated_at|date:'c' }}",
  "author": {
    "@type": "Organization",
    "name": "NAKLIYE NET"
  },
  "publisher": {
    "@type": "Organization",
    "name": "NAKLIYE NET",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ request.scheme }}://{{ request.get_host }}/static/logo.png"
    }
  },
  "description": "{{ post.meta_description|default:post.content|truncatewords:30 }}"
  {% if post.featured_image %},
  "image": "{{ request.scheme }}://{{ request.get_host }}{{ post.featured_image.url }}"
  {% endif %}
}
</script>
{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'website:index' %}">Ana Sayfa</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'blog:list' %}">Blog</a></li>
                    <li class="breadcrumb-item active">{{ post.title }}</li>
                </ol>
            </nav>

            <!-- Article -->
            <article class="blog-post">
                <header class="mb-4">
                    <h1 class="display-5 mb-3">{{ post.title }}</h1>
                    <div class="text-muted">
                        <i class="bi bi-calendar3"></i> {{ post.created_at|date:"d F Y, H:i" }}
                        <span class="ms-3"><i class="bi bi-eye"></i> {{ post.view_count }} görüntülenme</span>
                    </div>
                </header>

                {% if post.featured_image %}
                <div class="mb-4">
                    <img src="{{ post.featured_image.url }}"
                         alt="{{ post.title }}"
                         class="img-fluid rounded shadow-sm"
                         style="max-height: 500px; width: 100%; object-fit: cover;">
                </div>
                {% endif %}

                <div class="blog-content">
                    {{ post.content|safe }}
                </div>

                <hr class="my-5">

                <!-- Share Buttons -->
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Paylaş:</strong>
                        <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title }}"
                           target="_blank"
                           class="btn btn-sm btn-outline-primary ms-2">
                            <i class="bi bi-twitter"></i> Twitter
                        </a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}"
                           target="_blank"
                           class="btn btn-sm btn-outline-primary ms-2">
                            <i class="bi bi-facebook"></i> Facebook
                        </a>
                        <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}"
                           target="_blank"
                           class="btn btn-sm btn-outline-primary ms-2">
                            <i class="bi bi-linkedin"></i> LinkedIn
                        </a>
                    </div>
                    <a href="{% url 'blog:list' %}" class="btn btn-outline-secondary">
                        <i class="bi bi-arrow-left"></i> Tüm Yazılar
                    </a>
                </div>
            </article>
        </div>
    </div>
</div>

<style>
/* Blog Article Header */
.blog-post h1 {
    color: #111827;
    font-weight: 800;
}

.blog-post .text-muted {
    color: #6B7280 !important;
    font-size: 0.95rem;
}

/* Blog Content */
.blog-content {
    font-size: 1.125rem;
    line-height: 1.9;
    color: #1F2937;
    background: white;
    padding: 2rem;
    border-radius: 1rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.blog-content p {
    margin-bottom: 1.5rem;
    color: #1F2937;
}

.blog-content h2 {
    margin-top: 3rem;
    margin-bottom: 1.25rem;
    font-size: 2rem;
    font-weight: 700;
    color: #111827;
    border-bottom: 3px solid #0066FF;
    padding-bottom: 0.75rem;
}

.blog-content h2:first-child {
    margin-top: 0;
}

.blog-content h3 {
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    font-size: 1.5rem;
    font-weight: 600;
    color: #111827;
}

.blog-content ul, .blog-content ol {
    margin-bottom: 1.5rem;
    padding-left: 2.5rem;
    color: #1F2937;
}

.blog-content ul {
    list-style-type: disc;
}

.blog-content ol {
    list-style-type: decimal;
}

.blog-content li {
    margin-bottom: 0.875rem;
    line-height: 1.8;
    color: #1F2937;
}

.blog-content li strong {
    color: #111827;
    font-weight: 700;
}

.blog-content img {
    max-width: 100%;
    height: auto;
    border-radius: 0.75rem;
    margin: 2rem 0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.blog-content blockquote {
    border-left: 5px solid #0066FF;
    background: #F8F9FF;
    padding: 1.5rem;
    padding-left: 2rem;
    margin: 2rem 0;
    font-style: italic;
    color: #4B5563;
    border-radius: 0.5rem;
}

.blog-content strong {
    font-weight: 700;
    color: #111827;
}

.blog-content a {
    color: #0066FF;
    text-decoration: none;
    font-weight: 500;
    border-bottom: 2px solid transparent;
    transition: border-color 0.2s;
}

.blog-content a:hover {
    border-bottom-color: #0066FF;
}

/* Share Section */
.blog-post hr {
    border-color: #E5E7EB;
    opacity: 1;
}
</style>
{% endblock %}
