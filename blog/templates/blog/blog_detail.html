{% extends "base.html" %}
{% load static %}

{% block title %}{{ post.title }} - NAKLIYE NET Blog{% endblock %}

{% block meta_description %}{{ post.meta_description|default:post.title }}{% endblock %}

{% block extra_head %}
<!-- SEO Meta Tags -->
<meta name="keywords" content="{{ post.meta_keywords }}">
<meta name="author" content="NAKLIYE NET">
<meta property="og:title" content="{{ post.title }}">
<meta property="og:description" content="{{ post.meta_description|default:post.title }}">
<meta property="og:type" content="article">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
{% if post.featured_image %}
<meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{{ post.featured_image.url }}">
{% endif %}
<meta property="article:published_time" content="{{ post.published_at|default:post.created_at|date:'c' }}">
<meta property="article:modified_time" content="{{ post.updated_at|date:'c' }}">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ post.title }}">
<meta name="twitter:description" content="{{ post.meta_description|default:post.title }}">
{% if post.featured_image %}
<meta name="twitter:image" content="{{ request.scheme }}://{{ request.get_host }}{{ post.featured_image.url }}">
{% endif %}

<!-- Canonical URL -->
<link rel="canonical" href="{{ request.build_absolute_uri }}">

<!-- Schema.org JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ post.title }}",
  "description": "{{ post.meta_description|default:post.title }}",
  "datePublished": "{{ post.published_at|default:post.created_at|date:'c' }}",
  "dateModified": "{{ post.updated_at|date:'c' }}",
  "author": {
    "@type": "Organization",
    "name": "NAKLIYE NET"
  },
  "publisher": {
    "@type": "Organization",
    "name": "NAKLIYE NET",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ request.scheme }}://{{ request.get_host }}{% static 'images/logo.png' %}"
    }
  }{% if post.featured_image %},
  "image": "{{ request.scheme }}://{{ request.get_host }}{{ post.featured_image.url }}"{% endif %}
}
</script>
{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'website:index' %}">Ana Sayfa</a></li>
            <li class="breadcrumb-item"><a href="{% url 'blog:list' %}">Blog</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ post.title }}</li>
        </ol>
    </nav>

    <article class="blog-post">
        <!-- Ba≈ülƒ±k -->
        <header class="mb-4">
            <h1 class="display-4 mb-3">{{ post.title }}</h1>
            <div class="text-muted mb-3">
                <small>
                    üìÖ {{ post.published_at|default:post.created_at|date:"d F Y" }}
                    <span class="mx-2">‚Ä¢</span>
                    üëÅÔ∏è {{ post.view_count }} g√∂r√ºnt√ºlenme
                </small>
            </div>
        </header>

        <!-- √ñne √áƒ±kan G√∂rsel -->
        {% if post.featured_image %}
        <div class="mb-4">
            <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="img-fluid rounded shadow">
        </div>
        {% endif %}

        <!-- ƒ∞√ßerik -->
        <div class="blog-content">
            {{ post.content|safe }}
        </div>

        <!-- Payla≈ü Butonlarƒ± -->
        <div class="mt-5 pt-4 border-top">
            <h5 class="mb-3">Bu yazƒ±yƒ± payla≈ü:</h5>
            <div class="d-flex gap-2">
                <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}"
                   target="_blank" class="btn btn-primary">
                    Facebook
                </a>
                <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title }}"
                   target="_blank" class="btn btn-info text-white">
                    Twitter
                </a>
                <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}&title={{ post.title }}"
                   target="_blank" class="btn btn-primary">
                    LinkedIn
                </a>
                <a href="https://wa.me/?text={{ post.title }}%20{{ request.build_absolute_uri }}"
                   target="_blank" class="btn btn-success">
                    WhatsApp
                </a>
            </div>
        </div>

        <!-- Diƒüer Yazƒ±lar -->
        <div class="mt-5 pt-4 border-top">
            <h5>Diƒüer Blog Yazƒ±larƒ±</h5>
            <a href="{% url 'blog:list' %}" class="btn btn-outline-primary">T√ºm Yazƒ±larƒ± G√∂r</a>
        </div>
    </article>
</div>

<style>
.blog-content {
    font-size: 1.1rem;
    line-height: 1.8;
    color: #333;
}

.blog-content h2 {
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-weight: 600;
}

.blog-content h3 {
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    font-weight: 600;
}

.blog-content p {
    margin-bottom: 1.25rem;
}

.blog-content ul, .blog-content ol {
    margin-bottom: 1.25rem;
}

.blog-content img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 1.5rem 0;
}

.blog-content blockquote {
    border-left: 4px solid #007bff;
    padding-left: 1rem;
    margin: 1.5rem 0;
    font-style: italic;
    color: #666;
}
</style>
{% endblock %}
